let maxsound = 0
let soundlevel = 0
let strip = 255
let strip2 = neopixel.create(DigitalPin.P13, 256, NeoPixelMode.RGB)
let range2 = strip2.range(0, 15)
let range22 = strip2.range(16, 31)
let range3 = strip2.range(32, 47)
let range4 = strip2.range(48, 63)
let range5 = strip2.range(64, 79)
let range6 = strip2.range(80, 95)
let rang7 = strip2.range(96, 111)
let range8 = strip2.range(112, 127)
let range9 = strip2.range(128, 143)
let range10 = strip2.range(144, 159)
let range11 = strip2.range(160, 175)
let range12 = strip2.range(176, 191)
let range13 = strip2.range(192, 207)
let range14 = strip2.range(208, 223)
let range15 = strip2.range(224, 239)
let range16 = strip2.range(240, 255)
input.setSoundThreshold(SoundThreshold.Loud, 128)
basic.forever(function () {
    soundlevel = input.soundLevel()
    if (soundlevel > maxsound) {
        range2.showBarGraph(0, soundlevel)
        range22.showBarGraph(0, soundlevel)
        range3.showBarGraph(0, soundlevel)
        range4.showBarGraph(0, soundlevel)
        range5.showBarGraph(0, soundlevel)
        range6.showBarGraph(0, soundlevel)
        rang7.showBarGraph(0, soundlevel)
        range8.showBarGraph(0, soundlevel)
        range9.showBarGraph(0, soundlevel)
        range10.showBarGraph(0, soundlevel)
        range11.showBarGraph(0, soundlevel)
        range12.showBarGraph(0, soundlevel)
        range13.showBarGraph(0, soundlevel)
        range14.showBarGraph(0, soundlevel)
        range15.showBarGraph(0, soundlevel)
        range16.showBarGraph(0, soundlevel)
        maxsound = soundlevel
        basic.pause(100)
    }
})
